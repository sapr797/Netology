
# Домашнее задание к занятию 1.  «Введение в виртуализацию»

#### Это задание для самостоятельной отработки навыков и не предполагает обратной связи от преподавателя. Его выполнение не влияет на завершение модуля. Но мы рекомендуем его выполнить, чтобы закрепить полученные знания.  Все вопросы, возникающие в процессе выполнения заданий, пишите в учебный чат или в раздел "Вопросы по заданиям" в личном кабинете.

### Цели задания
1. Научиться запускать виртуальную машину в Yandex Cloud с минимальным расходом ресурсов.
2. Попрактиковаться в выборе платформы  и системы управления виртуализации для решения требуемых задач.

### Инструкция к выполению

1. Для выполнения задачи 1 ознакомьтесь с [инструкцией](https://github.com/netology-code/devops-materials/blob/master/cloudwork.MD) по экономии облачных ресурсов и затем выполните задачу 1 по шагам.
2. Своё решение к задачам 2,3,4 загрузите  в ваш ЛК.
   
## Задача 1

Ознакомьтесь с [инструкцией ](https://github.com/netology-code/devops-materials/blob/master/cloudwork.MD) по экономии облачных ресурсов.


1. Создайте через web-интерфейс Yandex Cloud - VPC и виртуальную машину из инструкции конфигурации "эконом-ВМ" с публичным ip-адресом. В пункте "Выбор образа/загрузочного диска" выберите вкладку "Cloud Marketplace" , щелкните "Посмотреть больше", найдите образ "Yandex Cloud Toolbox".
2. Убедитесь, что вы можете подключиться к консоли ВМ через ssh, используя публичный ip-адрес. Убедитесь, что на ВМ установлен Docker с помощью команды ```docker --version```(команду выполните от имени root пользователя) !
3. Узнайте в инструкции Яндекс, какие еще инструменты предустановлены в данном образе.
4. Оставьте ВМ работать, пока она не выключится самостоятельно! Опция "прерываемая" выключит ее не позже чем через 24 часа. 
5. Для наглядности подождите еще 1 сутки.
6. Перейдите по [ссылке ](https://console.cloud.yandex.ru/billing?section=accounts). Выберите свой платежный аккаунт. Перейдите на вкладку детализация (фильтр "По продуктам") и оцените график потребления финансов.
7. Удалите ВМ или пользуйтесь ею при выполнении последующих домашних заданий курса обучения.

---


## Задача 2

Выберите один из вариантов платформы в зависимости от задачи. Здесь нет однозначно верного ответа так как все зависит от конкретных условий: финансирование, компетенции специалистов, удобство использования, надежность, требования ИБ и законодательства, фазы луны.

Тип платформы:

- физические сервера;
- паравиртуализация;
- виртуализация уровня ОС;

Задачи:

- высоконагруженная база данных MySql, критичная к отказу;
- различные web-приложения;
- Windows-системы для использования бухгалтерским отделом;
- системы, выполняющие высокопроизводительные расчёты на GPU.

Объясните критерии выбора платформы в каждом случае.

Задача 1: Высоконагруженная база данных MySQL, критичная к отказу

Критерии выбора:

- Высокая нагрузка на базу данных подразумевает необходимость максимального использования ресурсов оборудования (процессора, памяти, дисков);
- Минимальная задержка и высокая пропускная способность диска критичны для производительности базы данных;
- Необходим высокий уровень надежности и отказоустойчивости, поскольку потеря данных недопустима.

Оптимальный выбор: Физические серверы

- Прямой доступ к оборудованию обеспечивает максимальную производительность I/O операций и минимизирует задержки, вызванные виртуализацией.
- Возможность использования RAID-массивов и специализированных SSD-накопителей для достижения максимальной скорости обработки запросов.
- Гибкость и контроль над аппаратурой позволяют точно настраивать оборудование под нужды конкретной нагрузки.
- Высокая степень отказоустойчивости достигается благодаря наличию резервных решений на физическом уровне (резервные диски, дублирование питания и охлаждения).
Задача 2: Различные Web-приложения

Критерии выбора:

- Большинство современных веб-приложений требуют гибкости в настройке среды исполнения и быстрой масштабируемости;
- Веб-приложениям важен баланс между производительностью и стоимостью;
- Часто требуется быстрая миграция приложений между серверами и быстрое восстановление после сбоев.

Оптимальный выбор: Виртуализация уровня ОС (контейнеризация)

- Контейнеры (Docker, LXC) обеспечивают высокую плотность размещения приложений, позволяя эффективнее использовать вычислительные мощности;
- Простота масштабирования и миграции позволяет оперативно разворачивать и поддерживать большое количество веб-сервисов;
- Легкое горизонтальное масштабирование путем быстрого развёртывания новых экземпляров приложений;
- Изоляция окружения для разных приложений повышает безопасность и снижает риски взаимного влияния.
Задача 3: Windows-системы для использования бухгалтерским отделом

Критерии выбора:

- Программы бухгалтерского учета чаще всего рассчитаны на работу в стандартной Windows-среде;
- Требуется совместимость с офисными инструментами и специализированным программным обеспечением;
- Пользователям необходим удобный доступ к рабочим столам и ресурсам.

Оптимальный выбор: Паравиртуализация

- Гипервизоры KVM, Xen или Hyper-V позволяют создавать полноценные виртуальные машины с полной эмуляцией аппаратуры, обеспечивая полную совместимость с Windows-системами;
- Поддерживаются драйверы графического интерфейса и устройств, что улучшает взаимодействие пользователей с рабочими средами;
- Удобство централизованного управления и поддержки множества рабочих станций из единого центра;
- Повышенная безопасность благодаря изоляции виртуальных машин друг от друга.

Задача 4: Системы, выполняющие высокопроизводительные расчеты на GPU

Критерии выбора:

- Основная цель — максимальное использование мощностей видеокарты для научных расчетов, анализа больших объемов данных или рендеринга графики;
- Тяжелые параллельные вычисления нуждаются в прямом доступе к аппаратным ресурсам.

Оптимальный выбор: Физические серверы

- Гарантированное прямое обращение к физическим ресурсам GPU обеспечивает наилучшую производительность;
- Отсутствие накладных расходов виртуализации ускоряет процессы вычислений;
- Физический доступ к высокоскоростной сети и мощным устройствам хранения данных гарантирует минимальные задержки и высокие показатели эффективности;
- Возможность точной настройки аппаратной части для оптимального распределения нагрузок.
         Задача	                           Платформа
Высоконагруженная БД MySQL	          Физические серверы
Различные Web-приложения	          Виртуализация уровня ОС (контейнеризация)
Windows-системы для бухгалтерии	      Паравиртуализация
Высокоэффективные GPU-вычисления      Физические серверы




## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based-инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source-решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows-инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

Сценарий 1:
 100 виртуальных машин на базе Linux и Windows, преимущественно Windows based-инфраструктура, требуются программные балансировщики нагрузки, репликация данных и создание резервных копий.

Выбор решения: Proxmox VE (Proxmox Virtual Environment)

Причины выбора:

- Open Source: Бесплатное решение с активным сообществом разработчиков.
- Производительность: Отличается высоким быстродействием и эффективностью, отлично справляется с нагрузками даже на крупных инфраструктурах.
- Совместимость: Хорошо интегрируется с Windows системами, поддерживает VMs как на базе Linux, так и Windows.
- Балансировка нагрузки: Включает встроенную поддержку балансировки нагрузки через HAProxy.
- Автоматизированные бэкапы: Интегрированы механизмы резервного копирования, поддерживающие как инкрементные, так и полные копии виртуальных машин.
- Масштабируемость: Масштабируется на сотни виртуальных машин и десятки физических узлов.

---

Сценарий 2:
 Производительное бесплатное Open Source решение для виртуализации небольшой инфраструктуры (20-30 серверов) на базе Linux и Windows виртуальных машин.

Выбор решения: KVM (Kernel-based Virtual Machine)

Причины выбора:

- Бесплатность: Открытый исходный код, бесплатный и свободно распространяемый.
- Высокая производительность: Очень низкое влияние виртуализации на производительность благодаря минимальной накладной стоимости.
- Поддержка Linux и Windows: Совместимо практически со всеми современными дистрибутивами Linux и версиями Windows.
- Простота интеграции: Легко интегрируется с такими инструментами, как Libvirt и QEMU, обеспечивающими продвинутую инфраструктуру виртуализации.
- Безопасность: Безопасность на высоком уровне, поддерживается средствами Linux Security Modules.

---
 Сценарий 3:
 Бесплатное, максимально совместимое и производительное решение для виртуализации Windows-инфраструктуры.

Выбор решения: Microsoft Hyper-V

Причины выбора:

- Продуктивность: Отлично оптимизирован для работы с Windows-системами, обеспечивая превосходную производительность и низкую нагрузку на аппаратуру.
- Компактность: Благодаря тесной интеграции с платформой Windows позволяет максимально полно раскрыть потенциал оборудования.
- Настройка: Простое и интуитивное управление инфраструктурой виртуализации.
- Стоимость: Является бесплатным решением для лицензированных версий Windows Server.
- Доступность функций: Предоставляет богатый инструментарий для мониторинга, восстановления и резервного копирования.

---

Сценарий 4:
Рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

Выбор решения: VirtualBox

Причины выбора:

- Универсальность: Позволяет устанавливать разнообразные дистрибутивы Linux и другие ОС без ограничений.
- Легкость: Простота в установке и управлении виртуальными машинами, идеально подходит для тестирования и разработки.
- Быстрота: Быстро создает и уничтожает виртуальные машины, удобно для быстрых тестов и экспериментов.
- Открытая лицензия: Доступно бесплатно для некоммерческого использования.
- Многофункциональность: Поддерживает интеграцию гостевых дополнений для улучшения взаимодействия с хостом.

---
                    Сценарий	                                                         Рекомендованное решение
100 виртуальных машин, общая инфраструктура, балансировка нагрузки,                          Proxmox VE
репликация данных, резервные копии
	
Маленькая инфраструктура (20-30 серверов), Linux и Windows виртуальные машины	                 KVM
Максимально совместимая и производительная бесплатная виртуализация Windows-инфраструктуры	  Microsoft Hyper-V
Рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux	  VirtualBox




## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, создавали бы вы гетерогенную среду или нет?

Возможные проблемы и недостатки гетерогенных сред виртуализации

Использование нескольких систем управления виртуализацией (hypervisors) одновременно создает ряд трудностей и недостатков, среди которых наиболее значимы следующие моменты:

1. Комплексность администрирования

Каждая система виртуализации имеет свою специфику в управлении ресурсами, настройке сети, мониторинге производительности и безопасности. Это усложняет процессы эксплуатации и увеличивает нагрузку на администратора инфраструктуры.

Решение: Необходимо централизовать управление инфраструктурой путем внедрения унифицированных инструментов мониторинга и управления, поддерживающих разные гипервизоры (например, VMware vCenter Server + Microsoft System Center Virtual Machine Manager).

2. Проблемы совместимости оборудования и программного обеспечения

Различные системы виртуализации поддерживают разное оборудование и операционные системы. Например, некоторые гипервизоры оптимизированы под работу с определенными процессорами или сетевыми картами, тогда как другие менее требовательны. Переход между разными платформами может привести к проблемам миграции виртуальных машин и потере функциональности.

Решение: Важно проводить тщательное тестирование аппаратной и программной совместимости перед внедрением нового гипервизора. Использование стандартов виртуализации (таких как OVF/OVA форматы) помогает облегчить миграцию.

--3. Повышенные затраты на обучение персонала

Администраторы вынуждены осваивать несколько интерфейсов управления, технологий резервного копирования и обновления. Это требует дополнительного времени и ресурсов на подготовку сотрудников.

Решение: Обучение должно проводиться систематически, а внедрение новых технологий лучше планировать поэтапно, начиная с малого числа серверов и постепенно расширяя использование новой технологии.

-4. Дополнительные расходы на лицензии и поддержку
Многие коммерческие гипервизоры требуют приобретения лицензий и поддержки производителя. Чем больше разных продуктов используется, тем выше общие издержки.

Решение: Оценивать экономические преимущества каждой используемой системы виртуализации и выбирать тот продукт, который обеспечит наилучшую производительность и функциональность при наименьших затратах.
---
5. Потеря гибкости в управлении ресурсами
Разные гипервизоры имеют различную политику распределения вычислительных мощностей, памяти и дисков. У некоторых решений приоритеты задаются статично, другие позволяют динамически перераспределять ресурсы. Эти различия затрудняют эффективную балансировку нагрузки внутри единой инфраструктуры.

Решение: Использовать специализированные инструменты анализа производительности (например, Prometheus/Grafana), которые предоставляют единый интерфейс для всех гипервизеров, помогая оперативно реагировать на изменения нагрузок.

--6. Безопасность и риск уязвимости
Каждый новый гипервизор добавляет потенциальные точки входа для злоумышленников. Поскольку каждая система виртуализации отличается своими особенностями безопасности, организация должна поддерживать высокий уровень защиты на каждом уровне.

Решение: Регулярно обновлять и проверять безопасность всех используемых гипервизеров, проводить аудиты безопасности, внедрять стандартизацию процессов мониторинга угроз и реагирования на инциденты.
---Нужно ли создавать гетерогенную среду?
Выбор зависит от конкретных требований бизнеса и целей проекта. Создание гетерогенной среды оправдано лишь в случаях, когда существует необходимость поддержать разнообразие операционных систем, обеспечить высокую доступность критичных сервисов или повысить отказоустойчивость инфраструктуры.

Однако в большинстве случаев моногенная среда предпочтительнее, поскольку она проще в управлении, дешевле в обслуживании и снижает риски безопасности и ошибок конфигурации.
Таким образом,  при отсутствии четких бизнес-требований, создание гетерогенной среды является неоправданным риском и дополнительной нагрузкой на ИТ-инфраструктуру организации


### Правила приема

Домашнее задание выполните в файле readme.md в GitHub-репозитории. В личном кабинете отправьте на проверку ссылку на .md-файл в вашем репозитории.
